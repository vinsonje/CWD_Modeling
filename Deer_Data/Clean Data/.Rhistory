names(checked) = sub("x2", "2", names(checked))
head(checked)
names(checked) = sub("X2", "2", names(checked))
head(checked)
names(checked) = str_to_upper(sub("X2", "2", names(checked)))
names(checked)
names(checked) = str_to_lower(sub("X2", "2", names(checked)))
setwd("C:/Users/SIU856560341/Desktop/CWD_Modeling/Deer_Data/Raw Data")
checked = read.csv("deer_checked_2014-2023.csv")
names(checked) = str_to_lower(sub("X2", "2", names(checked)))
checked.deer = gather(checked, key = "year", value = "checked", 2014:2023)
names(checked)
checked.deer = gather(checked, key = "year", value = "checked", "2014":"2023")
head(checked.deer)
sampled = read.csv("deer_sampled_2014-2023.csv")
head(sampled)
source("~/.active-rstudio-document", echo=TRUE)
head(sampled.deer)
NA + 3
deer.check.sample = cbind(checked.deer, sampled = sampled.deer$sampled)
deer.check.sample
setwd("C:/Users/SIU856560341/Desktop/CWD_Modeling/Deer_Data/Clean Data")
write.csv(deer.check.sample, "deer_checksample_2014-2023.csv", row.names = FALSE)
deer.cs = read.csv("deer_checksample_2014-2023.csv")
deer.cs = read.csv("deer_checksample_2014-2023.csv")
test.prop = deer.cs$sampled/deer.cs$checked
head(deer.cs)
aggregate(deer.cs, checked ~ year, sum)
deer.check.tot = aggregate(deer.cs, checked ~ year, sum)
deer.sample.tot = aggregate(deer.cs, sampled ~ year, sum)
deer.sample.tot
deer.check.tot = aggregate(deer.cs, checked ~ year + county, sum)
deer.sample.tot = aggregate(deer.cs, sampled ~ year + county, sum)
deer.check.tot
deer.cs.tot = cbind(deer.check.tot, sampled = deer.check.tot$checked)
deer.cs.tot
deer.cs.tot = cbind(deer.check.tot, sampled = deer.check.tot$checked, prop = deer.check.tot$sampled/deer.check.tot$checked)
deer.cs.tot = cbind(deer.check.tot, sampled = deer.check.tot$checked, prop = deer.sample.tot$sampled/deer.check.tot$checked)
deer.cs.tot
#Plot IL counties
states = map_data("state")
IL = subset(states, region %in% c("illinois"))
il_base = ggplot(data = IL, mapping = aes(x = long, y = lat, group = group)) +
coord_fixed(1.3) +
geom_polygon(color = "black", fill = NA) +
theme_nothing()
il_base +
geom_polygon(data = IL.county, fill = NA, color = "black") +
geom_polygon(color = "black", fill = NA)
#Plot IL counties
states = map_data("state")
IL = subset(states, region %in% c("illinois"))
il_base = ggplot(data = IL, mapping = aes(x = long, y = lat, group = group)) +
coord_fixed(1.3) +
geom_polygon(color = "black", fill = NA) +
theme_nothing()
il_base +
geom_polygon(data = IL.county, fill = NA, color = "black") +
geom_polygon(color = "black", fill = NA)
#Plot IL counties
states = map_data("state")
IL = subset(states, region %in% c("illinois"))
il_base = ggplot(data = IL, mapping = aes(x = long, y = lat, group = group)) +
coord_fixed(1.3) +
geom_polygon(color = "black", fill = NA) +
theme_nothing()
il_base +
geom_polygon(data = IL.county, fill = NA, color = "black") +
geom_polygon(color = "black", fill = NA)
head(deer.cs.tot)
deer.cs.tot = cbind(deer.check.tot, sampled = deer.sample.tot$sampled,
prop = deer.sample.tot$sampled/deer.check.tot$checked)
test.prop = deer.cs$sampled/deer.cs$checked
deer.cs.mean = aggregate(deer.cs.tot, prop ~ county, mean)
deer.cs.mean
deer.check.tot = aggregate(deer.cs, checked ~ year + county, sum)
IL.county = read.csv("IL_map_data.csv")
#Plot IL counties
states = map_data("state")
IL = subset(states, region %in% c("illinois"))
il_base = ggplot(data = IL, mapping = aes(x = long, y = lat, group = group)) +
coord_fixed(1.3) +
geom_polygon(color = "black", fill = NA) +
theme_nothing()
il_base +
geom_polygon(data = IL.county, fill = NA, color = "black") +
geom_polygon(color = "black", fill = NA)
unique(deer.cs.mean$county)
unique(IL.county$subregion)
i = 1
county.need = IL.county$subregion[i]
which(deer.cs.mean == county.need)
mean.index = which(deer.cs.mean == county.need)
length(mean.index)
#combine map and harv data (mean)
cs.out = NULL
for(i in 1:dim(IL.county)[1]){
mean.test.rate = NA
county.need = IL.county$subregion[i]
mean.index = which(deer.cs.mean == county.need)
if(length(mean.index)>0){
mean.test.rate = deer.cs.mean$prop[mean.index]
}
cs.out = c(cs.out, mean.test.rate)
}
cs.out
IL.county.mean = cbind(IL.county, test.rate = cs.out)
il_base +
geom_polygon(data = IL.county, aes(fill = mean.km), color = "black") +
theme(legend.position = "right") + scale_fill_gradient("average harvest/KM\nper year", low = "dodgerblue", high = "firebrick")
il_base +
geom_polygon(data = IL.county, aes(fill = test.rate), color = "black") +
theme(legend.position = "right") + scale_fill_gradient("average harvest/KM\nper year", low = "dodgerblue", high = "firebrick")
il_base +
geom_polygon(data = IL.county.mean, aes(fill = test.rate), color = "black") +
theme(legend.position = "right") + scale_fill_gradient("average harvest/KM\nper year", low = "dodgerblue", high = "firebrick")
il_base +
geom_polygon(data = IL.county.mean, aes(fill = test.rate), color = "black") +
theme(legend.position = "right") + scale_fill_gradient("average testing rate\nper year", low = "dodgerblue", high = "firebrick")
max(IL.county.mean$test.rate)
max(deer.cs.mean)
max(deer.cs.mean$prop)
ggplot(deer.cs.mean) + geom_histogram(aes(x = prop)) +
geom_vline(aes(xintercept = mean(harvest.mean$prop)), colour="red", lwd = 3.0) + theme_cowplot()
ggplot(deer.cs.mean) + geom_histogram(aes(x = prop)) +
geom_vline(aes(xintercept = mean(deer.cs.mean$prop)), colour="red", lwd = 3.0) + theme_cowplot()
ggplot(deer.cs.mean) + geom_histogram(aes(x = prop)) +
geom_vline(aes(xintercept = mean(prop)), colour="red", lwd = 3.0) + theme_cowplot()
ggplot(deer.cs.tot) + geom_histogram(aes(x = prop)) +
geom_vline(aes(xintercept = mean(prop)), colour="red", lwd = 3.0) + theme_cowplot()
ggplot(deer.cs.mean) + geom_histogram(aes(x = prop)) +
geom_vline(aes(xintercept = mean(prop)), colour="red", lwd = 3.0) + theme_cowplot() +
ggtitle("aggregated by county: average testing rate per year")
deer.cs.mean = aggregate(deer.cs.tot, prop ~ county, mean)
deer.cs.mean
source("~/.active-rstudio-document", echo=TRUE)
source("~/.active-rstudio-document", echo=TRUE)
CWD_all = rbind(CWD_03_22, CWD_23)
head(CWD_all)
names(CWD_all) = c("date", "county", "age", "sex", "status", "source", "collection.method", "group", "trs")
head(CWD_all)
unique(CWD.all$county)
setwd("C:/Users/SIU856560341/Desktop/CWD_Modeling/Deer_Data/Raw Data")
CWD.03_22 = read.csv("IL_CWD_2003-2022.csv")
CWD.23 = read.csv("IL_CWD_2023.csv")
CWD.all = rbind(CWD.03_22, CWD.23)
names(CWD.all) = c("date", "county", "age", "sex", "status", "source", "collection.method", "group", "trs")
unique(CWD.all$county)
CWD.all[which(CWD.all$county == ""),]
CWD.all$county = str_to_upper(CWD.all$county)
unique(CWD.all$county)
setwd("C:/Users/SIU856560341/Desktop/CWD_Modeling/Deer_Data/Clean Data")
IL.county = read.csv("IL_map_data.csv")
unique(IL.county$subregion)
CWD.all$county = str_to_upper(CWD.all$county)
CWD.all$county[which(CWD.all$county == "JODAVIESS")] = "JO DAVIESS"
unique(CWD.all$county)
setdiff(unique(IL.county$subregion), unique(CWD.all$county))
setdiff(unique(CWD.all$county), unique(IL.county$subregion))
setwd("C:/Users/SIU856560341/Desktop/CWD_Modeling/Deer_Data/Raw Data")
CWD.03_22 = read.csv("IL_CWD_2003-2022.csv")
CWD.23 = read.csv("IL_CWD_2023.csv")
CWD.all = rbind(CWD.03_22, CWD.23)
names(CWD.all) = c("date", "county", "age", "sex", "status", "source", "collection.method", "group", "trs")
CWD.all$county = str_to_upper(CWD.all$county)
CWD.all$county[which(CWD.all$county == "JODAVIESS")] = "JO DAVIESS"
CWD.all$county[which(CWD.all$county == "STCLAIR")] = "ST. CLAIR"
CWD.all$county[which(CWD.all$county == "ROCKISLAND")] = "ROCK ISLAND"
setdiff(unique(CWD.all$county), unique(IL.county$subregion))
unique(CWD.all$county)
head(CWD.all)
View(CWD.all)
nchar(CWD.all$date[1:10])
unique(nchar(CWD.all$date))
sapply(CWD.all$date[which(nchar(CWD.all$date))], paste, "0", sep="")
sapply(CWD.all$date[which(nchar(CWD.all$date == 7))], paste, "0", sep="")
sapply(CWD.all$date[which(nchar(CWD.all$date) == 7)], paste, "0", sep="")
sapply("0", paste, CWD.all$date[which(nchar(CWD.all$date) == 7)], sep="")
setwd("C:/Users/SIU856560341/Desktop/CWD_Modeling/Deer_Data/Raw Data")
CWD.03_22 = read.csv("IL_CWD_2003-2022.csv")
CWD.23 = read.csv("IL_CWD_2023.csv")
CWD.all = rbind(CWD.03_22, CWD.23)
names(CWD.all) = c("date", "county", "age", "sex", "status", "source", "collection.method", "group", "trs")
CWD.all$county = str_to_upper(CWD.all$county)
CWD.all$county[which(CWD.all$county == "JODAVIESS")] = "JO DAVIESS"
CWD.all$county[which(CWD.all$county == "STCLAIR")] = "ST. CLAIR"
CWD.all$county[which(CWD.all$county == "ROCKISLAND")] = "ROCK ISLAND"
CWD.all$date[which(nchar(CWD.all$date == 7))] = sapply("0", paste, CWD.all$date[which(nchar(CWD.all$date) == 7)], sep="")
setwd("C:/Users/SIU856560341/Desktop/CWD_Modeling/Deer_Data/Raw Data")
CWD.03_22 = read.csv("IL_CWD_2003-2022.csv")
CWD.23 = read.csv("IL_CWD_2023.csv")
CWD.all = rbind(CWD.03_22, CWD.23)
names(CWD.all) = c("date", "county", "age", "sex", "status", "source", "collection.method", "group", "trs")
CWD.all$county = str_to_upper(CWD.all$county)
CWD.all$county[which(CWD.all$county == "JODAVIESS")] = "JO DAVIESS"
CWD.all$county[which(CWD.all$county == "STCLAIR")] = "ST. CLAIR"
CWD.all$county[which(CWD.all$county == "ROCKISLAND")] = "ROCK ISLAND"
CWD.all$date[which(nchar(CWD.all$date) == 7)] = sapply("0", paste, CWD.all$date[which(nchar(CWD.all$date) == 7)], sep="")
unique(nchar(CWD.all$date))
?as.Date
CWD.all$date = as.Date(CWD.all$date, "%mm%dd%yyyy")
CWD.all$date
CWD.all$date = as.Date(CWD.all$date, "%mm/%dd/%yyyy")
setwd("C:/Users/SIU856560341/Desktop/CWD_Modeling/Deer_Data/Raw Data")
CWD.03_22 = read.csv("IL_CWD_2003-2022.csv")
CWD.23 = read.csv("IL_CWD_2023.csv")
CWD.all = rbind(CWD.03_22, CWD.23)
names(CWD.all) = c("date", "county", "age", "sex", "status", "source", "collection.method", "group", "trs")
CWD.all$county = str_to_upper(CWD.all$county)
CWD.all$county[which(CWD.all$county == "JODAVIESS")] = "JO DAVIESS"
CWD.all$county[which(CWD.all$county == "STCLAIR")] = "ST. CLAIR"
CWD.all$county[which(CWD.all$county == "ROCKISLAND")] = "ROCK ISLAND"
CWD.all$date[which(nchar(CWD.all$date) == 7)] = sapply("0", paste, CWD.all$date[which(nchar(CWD.all$date) == 7)], sep="")
as.Date(CWD.all$date, "%mm/%dd/%yyyy")
sapply(paste(c(substr(CWD.all$date, 1, 2), substr(CWD.all$date, 3,4)), substr(CWD.all$date, 5,6)), collapse="/")
?sapply
sub.slash = function(text){paste(c(substr(CWD.all$date, 1, 2), substr(CWD.all$date, 3,4)), substr(CWD.all$date, 5,6)), collapse="/")}
sub.slash = function(text){paste(c(substr(CWD.all$date, 1, 2), substr(CWD.all$date, 3,4), substr(CWD.all$date, 5,6)), collapse="/")}
sapply(CWD.all$date, sub.slash)
sub.slash = function(text){paste(c(substr(text, 1, 2), substr(text, 3,4), substr(text, 5,6)), collapse="/")}
sapply(CWD.all$date, sub.slash)
sub.slash = function(text){paste(c(substr(text, 1, 2), substr(text, 3,4), substr(text, 5,8)), collapse="/")}
sapply(CWD.all$date, sub.slash)
setwd("C:/Users/SIU856560341/Desktop/CWD_Modeling/Deer_Data/Raw Data")
CWD.03_22 = read.csv("IL_CWD_2003-2022.csv")
CWD.23 = read.csv("IL_CWD_2023.csv")
CWD.all = rbind(CWD.03_22, CWD.23)
names(CWD.all) = c("date", "county", "age", "sex", "status", "source", "collection.method", "group", "trs")
CWD.all$county = str_to_upper(CWD.all$county)
CWD.all$county[which(CWD.all$county == "JODAVIESS")] = "JO DAVIESS"
CWD.all$county[which(CWD.all$county == "STCLAIR")] = "ST. CLAIR"
CWD.all$county[which(CWD.all$county == "ROCKISLAND")] = "ROCK ISLAND"
CWD.all$date[which(nchar(CWD.all$date) == 7)] = sapply("0", paste, CWD.all$date[which(nchar(CWD.all$date) == 7)], sep="")
sub.slash = function(text){paste(c(substr(text, 1, 2), substr(text, 3,4), substr(text, 5,8)), collapse="/")}
CWD.all$date = sapply(CWD.all$date, sub.slash)
head(CWD.all)
as.Date(CWD.all$date, "%mm/%dd/%yyyy")
setwd("C:/Users/SIU856560341/Desktop/CWD_Modeling/Deer_Data/Raw Data")
CWD.03_22 = read.csv("IL_CWD_2003-2022.csv")
CWD.23 = read.csv("IL_CWD_2023.csv")
CWD.all = rbind(CWD.03_22, CWD.23)
names(CWD.all) = c("date", "county", "age", "sex", "status", "source", "collection.method", "group", "trs")
CWD.all$county = str_to_upper(CWD.all$county)
CWD.all$county[which(CWD.all$county == "JODAVIESS")] = "JO DAVIESS"
CWD.all$county[which(CWD.all$county == "STCLAIR")] = "ST. CLAIR"
CWD.all$county[which(CWD.all$county == "ROCKISLAND")] = "ROCK ISLAND"
CWD.all$date[which(nchar(CWD.all$date) == 7)] = sapply("0", paste, CWD.all$date[which(nchar(CWD.all$date) == 7)], sep="")
sub.slash = function(text){paste(c(substr(text, 1, 2), substr(text, 3,4), substr(text, 5,8)), collapse="/")}
CWD.all$date = sapply(CWD.all$date, sub.slash)
CWD.all$date = as.Date(CWD.all$date, "%m/%d/%y")
head(CWD.all)
write.csv(CWD.all, "CWD_data_2003-2023.csv", row.names = FALSE)
source("~/.active-rstudio-document", echo=TRUE)
setwd("C:/Users/SIU856560341/Desktop/CWD_Modeling/Deer_Data/Clean Data")
source("C:/Users/SIU856560341/Desktop/CWD_Modeling/Deer_Data/Data Manipulation Code/clean_comb_CWD.R", echo=TRUE)
source("C:/Users/SIU856560341/Desktop/CWD_Modeling/Deer_Data/Data Manipulation Code/clean_comb_CWD.R", echo=TRUE)
CWD.data = read.csv("CWD_data_2003-2023.csv")
head(CWD.data)
source("~/.active-rstudio-document", echo=TRUE)
head(CWD.data)
install.packages("sharpshootR")
require(sharpshootR)
?PLSS2LL
?formatPLSS
unique(CWD.data$collection.method)
CWD.ss.data = subset(CWD.data, collection.method %in% c("DNRSHARPSHOOT", "OTHERSHARPSHOOT"))
head(CWD.ss.data)
require(lubridate)
day(CWD.ss.data$date)
setwd("C:/Users/SIU856560341/Desktop/CWD_Modeling/Deer_Data/Clean Data")
CWD.data = read.csv("CWD_data_2003-2023.csv")
CWD.data.year = year(CWD.data$date)
CWD.data.month = month(CWD.data$date)
CWD.data.day = day(CWD.data$date)
CWD.data = cbind(CWD.data, year = CWD.data.year, month = CWD.data.month, day = CWD.data.day)
head(CWD.data)
CWD.ss.data = subset(CWD.data, group %in% SHARPSHOOTING)
CWD.ss.data = subset(CWD.data, group %in% "SHARPSHOOTING")
CWD.ss.data
CWD.ss.counts = data.frame(table(CWD.ss.data$date))
CWD.ss.counts
names(CWD.ss.counts) = c("date", "ss.removal")
ggplot(CWD.ss.counts) + geom_col(aes(x = date, y = "ss.removal"))
ggplot(CWD.ss.counts) + geom_point(aes(x = date, y = "ss.removal"))
tail(CWD.data)
max(CWD.data$year)
unique(CWD.data$year)
head(CWD.data)
CWD.data = read.csv("CWD_data_2003-2023.csv")
CWD.data
setwd("C:/Users/SIU856560341/Desktop/CWD_Modeling/Deer_Data/Raw Data")
CWD.03_22 = read.csv("IL_CWD_2003-2022.csv")
CWD.23 = read.csv("IL_CWD_2023.csv")
head(CWD.03_22)
setwd("C:/Users/SIU856560341/Desktop/CWD_Modeling/Deer_Data/Raw Data")
CWD.03_22 = read.csv("IL_CWD_2003-2022.csv")
CWD.23 = read.csv("IL_CWD_2023.csv")
CWD.all = rbind(CWD.03_22, CWD.23)
names(CWD.all) = c("date", "county", "age", "sex", "status", "source", "collection.method", "group", "trs")
CWD.all$county = str_to_upper(CWD.all$county)
CWD.all$county[which(CWD.all$county == "JODAVIESS")] = "JO DAVIESS"
CWD.all$county[which(CWD.all$county == "STCLAIR")] = "ST. CLAIR"
CWD.all$county[which(CWD.all$county == "ROCKISLAND")] = "ROCK ISLAND"
CWD.all$date[which(nchar(CWD.all$date) == 7)] = sapply("0", paste, CWD.all$date[which(nchar(CWD.all$date) == 7)], sep="")
sub.slash = function(text){paste(c(substr(text, 1, 2), substr(text, 3,4), substr(text, 5,8)), collapse="/")}
CWD.all$date = sapply(CWD.all$date, sub.slash)
head(CWD.03_22)
head(CWD.all)
CWD.all$date = as.Date(CWD.all$date, "%m/%d/%y")
head(CWD.all)
CWD.all$date = as.Date(CWD.all$date, "%mm/%dd/%yyyy")
setwd("C:/Users/SIU856560341/Desktop/CWD_Modeling/Deer_Data/Raw Data")
CWD.03_22 = read.csv("IL_CWD_2003-2022.csv")
CWD.23 = read.csv("IL_CWD_2023.csv")
CWD.all = rbind(CWD.03_22, CWD.23)
names(CWD.all) = c("date", "county", "age", "sex", "status", "source", "collection.method", "group", "trs")
CWD.all$county = str_to_upper(CWD.all$county)
CWD.all$county[which(CWD.all$county == "JODAVIESS")] = "JO DAVIESS"
CWD.all$county[which(CWD.all$county == "STCLAIR")] = "ST. CLAIR"
CWD.all$county[which(CWD.all$county == "ROCKISLAND")] = "ROCK ISLAND"
CWD.all$date[which(nchar(CWD.all$date) == 7)] = sapply("0", paste, CWD.all$date[which(nchar(CWD.all$date) == 7)], sep="")
sub.slash = function(text){paste(c(substr(text, 1, 2), substr(text, 3,4), substr(text, 5,8)), collapse="/")}
CWD.all$date = sapply(CWD.all$date, sub.slash)
CWD.all$date = as.Date(CWD.all$date, "%mm/%dd/%yyyy")
head(CWD.all)
setwd("C:/Users/SIU856560341/Desktop/CWD_Modeling/Deer_Data/Raw Data")
CWD.03_22 = read.csv("IL_CWD_2003-2022.csv")
CWD.23 = read.csv("IL_CWD_2023.csv")
CWD.all = rbind(CWD.03_22, CWD.23)
names(CWD.all) = c("date", "county", "age", "sex", "status", "source", "collection.method", "group", "trs")
CWD.all$county = str_to_upper(CWD.all$county)
CWD.all$county[which(CWD.all$county == "JODAVIESS")] = "JO DAVIESS"
CWD.all$county[which(CWD.all$county == "STCLAIR")] = "ST. CLAIR"
CWD.all$county[which(CWD.all$county == "ROCKISLAND")] = "ROCK ISLAND"
CWD.all$date[which(nchar(CWD.all$date) == 7)] = sapply("0", paste, CWD.all$date[which(nchar(CWD.all$date) == 7)], sep="")
sub.slash = function(text){paste(c(substr(text, 1, 2), substr(text, 3,4), substr(text, 5,8)), collapse="/")}
CWD.all$date = sapply(CWD.all$date, sub.slash)
CWD.all$date = as.Date(CWD.all$date, "%m/%d/%Y")
head(CWD.all)
source("C:/Users/SIU856560341/Desktop/CWD_Modeling/Deer_Data/Data Manipulation Code/clean_comb_CWD.R", echo=TRUE)
source("C:/Users/SIU856560341/Desktop/CWD_Modeling/Deer_Data/Data Manipulation Code/clean_comb_CWD.R", echo=TRUE)
source("~/.active-rstudio-document", echo=TRUE)
CWD.ss.counts
setwd("C:/Users/SIU856560341/Desktop/CWD_Modeling/Deer_Data/Clean Data")
CWD.data = read.csv("CWD_data_2003-2023.csv")
CWD.data$date = as.Date(CWD.data, "%y-%m-%d")
CWD.data$date = as.Date(CWD.data$date, "%y-%m-%d")
setwd("C:/Users/SIU856560341/Desktop/CWD_Modeling/Deer_Data/Clean Data")
CWD.data = read.csv("CWD_data_2003-2023.csv")
CWD.data$date = as.Date(CWD.data$date, "%y-%m-%d")
CWD.data.year = year(CWD.data$date)
CWD.data.month = month(CWD.data$date)
CWD.data.day = day(CWD.data$date)
CWD.data = cbind(CWD.data, year = CWD.data.year, month = CWD.data.month, day = CWD.data.day)
CWD.ss.data = subset(CWD.data, group %in% "SHARPSHOOTING")
CWD.ss.counts = data.frame(table(CWD.ss.data$date))
names(CWD.ss.counts) = c("date", "ss.removal")
source("~/.active-rstudio-document", echo=TRUE)
CWD.ss.counts
CWD.data
CWD.data = read.csv("CWD_data_2003-2023.csv")
CWD.data.year = year(CWD.data$date)
CWD.data.month = month(CWD.data$date)
CWD.data.day = day(CWD.data$date)
CWD.data = cbind(CWD.data, year = CWD.data.year, month = CWD.data.month, day = CWD.data.day)
CWD.ss.data = subset(CWD.data, group %in% "SHARPSHOOTING")
CWD.ss.counts = data.frame(table(CWD.ss.data$date))
names(CWD.ss.counts) = c("date", "ss.removal")
CWD.ss.counts
is.Date(CWD.ss.counts$date[1])
as.Date(CWD.ss.counts$date, "%y-%m-%d")
as.Date(CWD.ss.counts$date, "%Y-%m-%d")
source("~/.active-rstudio-document", echo=TRUE)
ggplot(CWD.ss.counts) + geom_point(aes(x = date, y = ss.removal))
ggplot(CWD.ss.counts) + geom_point(aes(x = date, y = ss.removal)) +
scale_x_date(date_labels = "%b")
ggplot(CWD.ss.counts) + geom_point(aes(x = date, y = ss.removal)) +
scale_x_date(date_labels = "%b %Y")
CWD.ss.counts
which(CWD.data$year > 2024)
weird = which(CWD.data$year > 2024)
CWD.data[weird,]
wrong.year = which(yearCWD.all$date)>2030))
wrong.year = which(yearCWD.all$date>2030)
wrong.year = which(year(CWD.all$date) > 2030)
source("C:/Users/SIU856560341/Desktop/CWD_Modeling/Deer_Data/Data Manipulation Code/clean_comb_CWD.R", echo=TRUE)
which(year(CWD.all$date) > 2030)
wrong.year = which(year(CWD.all$date) > 2030)
CWD.all[wrong.year]
CWD.all[wrong.year,]
setwd("C:/Users/SIU856560341/Desktop/CWD_Modeling/Deer_Data/Raw Data")
CWD.03_22 = read.csv("IL_CWD_2003-2022.csv")
CWD.23 = read.csv("IL_CWD_2023.csv")
CWD.all = rbind(CWD.03_22, CWD.23)
names(CWD.all) = c("date", "county", "age", "sex", "status", "source", "collection.method", "group", "trs")
CWD.all$county = str_to_upper(CWD.all$county)
CWD.all$county[which(CWD.all$county == "JODAVIESS")] = "JO DAVIESS"
CWD.all$county[which(CWD.all$county == "STCLAIR")] = "ST. CLAIR"
CWD.all$county[which(CWD.all$county == "ROCKISLAND")] = "ROCK ISLAND"
CWD.all$date[which(nchar(CWD.all$date) == 7)] = sapply("0", paste, CWD.all$date[which(nchar(CWD.all$date) == 7)], sep="")
sub.slash = function(text){paste(c(substr(text, 1, 2), substr(text, 3,4), substr(text, 5,8)), collapse="/")}
CWD.all$date = sapply(CWD.all$date, sub.slash)
CWD.all$date = as.Date(CWD.all$date, "%m/%d/%Y")
wrong.year = which(year(CWD.all$date) > 2030)
year.2111 = which(year(CWD.all$date) == 2111)
year(CWD.all$date[year.2111]) = 2011
year.3013 = which(year(CWD.all$date) == 3013)
year(CWD.all$date[year.3013]) = 3013
year.2111
year(CWD.all$date[year.2111])
CWD.all$date[year.2111]
source("C:/Users/SIU856560341/Desktop/CWD_Modeling/Deer_Data/Data Manipulation Code/clean_comb_CWD.R", echo=TRUE)
source("~/.active-rstudio-document", echo=TRUE)
ggplot(CWD.ss.counts) + geom_point(aes(x = date, y = ss.removal)) +
scale_x_date(date_labels = "%b %Y") + theme_cowplot()
?table
CWD.ss.month.year = data.frame(table(CWD.ss.data$month, CWD.ss.data$month))
CWD.ss.month.year
CWD.ss.month.year = data.frame(table(CWD.ss.data$year, CWD.ss.data$month))
CWD.ss.month.year
CWD.ss.month.year %>%
mutate(Date = with(., sprintf("%d-%02d", year, month)))
?sprintf
install.packages("zoo")
require(zoo)
CWD.ss.month.year = data.frame(table(CWD.ss.data$year, CWD.ss.data$month))
names(CWD.ss.counts) = c("year", "month", "ss.removal")
CWD.ss.month.year
CWD.ss.month.year = data.frame(table(CWD.ss.data$year, CWD.ss.data$month))
names(CWD.ss.month.year) = c("year", "month", "ss.removal")
CWD.ss.month.year = as.yearmon(paste(CWD.ss.month.year$year, CWD.ss.month.year$month), "%Y %m")
CWD.ss.month.year
?as.yearmon
CWD.ss.month.year = data.frame(table(CWD.ss.data$year, CWD.ss.data$month))
names(CWD.ss.month.year) = c("year", "month", "ss.removal")
CWD.ss.month.year$date = as.yearmon(paste(CWD.ss.month.year$year, CWD.ss.month.year$month), "%Y %m")
CWD.ss.month.year
CWD.ss.month.year = data.frame(table(CWD.ss.data$year, CWD.ss.data$month))
names(CWD.ss.month.year) = c("year", "month", "ss.removal")
CWD.ss.month.year$date = as.yearmon(paste(CWD.ss.month.year$year, CWD.ss.month.year$month), "%Y %m")
ggplot(CWD.ss.month) + geom_point(aes(x = date, y = ss.removal)) +
scale_x_date(date_labels = "%b %Y") + theme_cowplot()
ggplot(CWD.ss.month.year) + geom_point(aes(x = date, y = ss.removal)) +
scale_x_date(date_labels = "%b %Y") + theme_cowplot()
as.Date(paste(CWD.ss.month.year$year, CWD.ss.month.year$month), "%Y %m")
paste(CWD.ss.month.year$year, CWD.ss.month.year$month)
as.Date(paste(CWD.ss.month.year$year, CWD.ss.month.year$month), "%Y-%m")
CWD.ss.month.year = data.frame(table(CWD.ss.data$year, CWD.ss.data$month))
names(CWD.ss.month.year) = c("year", "month", "ss.removal")
CWD.ss.month.year$date = as.yearmon(paste(CWD.ss.month.year$year, CWD.ss.month.year$month), "%Y %m")
ggplot(CWD.ss.month.year) + geom_point(aes(x = date, y = ss.removal)) + theme_cowplot()
head(CWD.ss.month.year)
CWD.ss.month.year = data.frame(table(CWD.ss.data$year, CWD.ss.data$month))
names(CWD.ss.month.year) = c("year", "month", "ss.removal")
CWD.ss.month.year = CWD.ss.month.year[-which(CWD.ss.month.year$ss.removal == 0),]
CWD.ss.month.year$date = as.yearmon(paste(CWD.ss.month.year$year, CWD.ss.month.year$month), "%Y %m")
ggplot(CWD.ss.month.year) + geom_point(aes(x = date, y = ss.removal)) + theme_cowplot()
View(CWD.ss.month.year)
View(CWD.ss.data)
head(CWD.ss.data)
CWD.ss.month.year = data.frame(table(CWD.ss.data$year, CWD.ss.data$month, CWD.ss.data$collection.method))
names(CWD.ss.month.year) = c("year", "month", "ss.removal")
CWD.ss.month.year = CWD.ss.month.year[-which(CWD.ss.month.year$ss.removal == 0),]
CWD.ss.month.year$date = as.yearmon(paste(CWD.ss.month.year$year, CWD.ss.month.year$month), "%Y %m")
CWD.ss.month.year
CWD.ss.data$collection.method
table(CWD.ss.data$year, CWD.ss.data$month, CWD.ss.data$collection.method)
?table
library(tidyverse)
CWD.ss.month.year = data.frame(table(CWD.ss.data$year, CWD.ss.data$month))
names(CWD.ss.month.year) = c("year", "month", "ss.removal")
CWD.ss.month.year = CWD.ss.month.year[-which(CWD.ss.month.year$ss.removal == 0),]
CWD.ss.month.year$date = as.yearmon(paste(CWD.ss.month.year$year, CWD.ss.month.year$month), "%Y %m")
ggplot(CWD.ss.month.year) + geom_point(aes(x = date, y = ss.removal)) + theme_cowplot()
CWD.ss.type = CWD.ss.data %>% select('year','month','collection.method') %>% ftable()
CWD.ss.type
?ftable
as.table(CWD.ss.type)
as.data.frame(CWD.ss.type)
ggplot(CWD.ss.month.year) + geom_point(aes(x = date, y = ss.removal, col = collection.method)) + theme_cowplot()
CWD.ss.type = CWD.ss.data %>% select('year','month','collection.method') %>% ftable()
CWD.ss.type = as.data.frame(CWD.ss.type)
names(CWD.ss.type) = c("year", "month", "collection.method", "ss.removal")
ggplot(CWD.ss.type) + geom_point(aes(x = date, y = ss.removal, col = collection.method)) + theme_cowplot()
CWD.ss.type = CWD.ss.data %>% select('year','month','collection.method') %>% ftable()
CWD.ss.type = as.data.frame(CWD.ss.type)
names(CWD.ss.type) = c("year", "month", "collection.method", "ss.removal")
CWD.ss.type$date = as.yearmon(paste(CWD.ss.type$year, CWD.ss.type$month), "%Y %m")
ggplot(CWD.ss.type) + geom_point(aes(x = date, y = ss.removal, col = collection.method)) + theme_cowplot()
CWD.ss.type = CWD.ss.data %>% select('year','month','collection.method') %>% ftable()
CWD.ss.type = as.data.frame(CWD.ss.type)
names(CWD.ss.type) = c("year", "month", "collection.method", "ss.removal")
CWD.ss.type = CWD.ss.type[-which(CWD.ss.type$ss.removal == 0),]
CWD.ss.type$date = as.yearmon(paste(CWD.ss.type$year, CWD.ss.type$month), "%Y %m")
CWD.ss.type
ggplot(CWD.ss.type) + geom_point(aes(x = date, y = ss.removal, col = collection.method)) + theme_cowplot() +
theme(legend.position = "bottom")
ggplot(CWD.ss.type) + geom_point(aes(x = date, y = ss.removal, col = collection.method)) + theme_cowplot() +
theme(legend.position = "bottom") + geom_smooth(ss.removal ~ date + collection.method)
ggplot(CWD.ss.type) + geom_point(aes(x = date, y = ss.removal, col = collection.method)) + theme_cowplot() +
theme(legend.position = "bottom") + geom_smooth(aes(ss.removal ~ date + collection.method))
?geom_smooth
ggplot(CWD.ss.type) + geom_point(aes(x = date, y = ss.removal, col = collection.method)) + theme_cowplot() +
theme(legend.position = "bottom") + geom_smooth(aes(x = date, y = ss.removal, col = collection.method))
CWD.ss.avg = aggregate(CWD.ss.type, ss.removal ~ month + collection.method, mean)
CWD.ss.avg
ggplot(CWD.ss.avg) + geom_col(aes(x = month, y = ss.removal, fill = collection.method))
ggplot(CWD.ss.avg) + geom_col(aes(x = month, y = ss.removal, fill = collection.method)) + theme_cowplot() +
theme(legend.position = "bottom")
?geom_col
ggplot(CWD.ss.avg) + geom_col(aes(x = month, y = ss.removal, fill = collection.method), position = "dodge") + theme_cowplot() +
theme(legend.position = "bottom")
